
<ion-content class="close-to-me-scroll">
    <ion-header class="header-search-map">
        <ion-grid [ngClass]="bottomDrawer.showBackToolbar ? 'unset' : 'none'">
            <ion-row>
                <ion-col size="1">
                    <ion-button class="btn-no-style" routerLink="/app/orders">
                        <ion-icon class="card-i size-icon-default" name="cart"></ion-icon>
                    </ion-button>
                </ion-col>
                <ion-col size="9">
                    <ion-searchbar placeholder="Busca tiendas o servicios" color="light" class="without-search-icon"></ion-searchbar>
                </ion-col>
                <ion-col size="2">
                    <app-avatar-header></app-avatar-header>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-header>

    <div class="background-sheet-header" [hidden]="!bottomDrawer.showBackToolbar"></div>

    <div #mapCanvas class="map-canvas"></div>

    <ion-fab #fab class="fab-corner-lr" horizontal="end" vertical="bottom" slot="fixed">
        <ion-fab-button color="{{ fabAttached ? 'map':'light'}}" (click)="attachedPosition()">
            <ion-icon src="assets/icon/my_location.svg"></ion-icon>
        </ion-fab-button>
    </ion-fab>
</ion-content>

<ion-bottom-drawer [disableDrag]="bottomDrawer.disableDrag" [(state)]="bottomDrawer.drawerState" [minimumHeight]="bottomDrawer.minimumHeight" (stateChange)="onDrawerStateChange($event)"
                   [dockedHeight]="bottomDrawer.dockedHeight" [shouldBounce]="bottomDrawer.shouldBounce" [distanceTop]="bottomDrawer.distanceTop"
                   (scrollContent)="onScrollContent($event)" [bottomHeightChange]="bottomHeightChange" (hideBottomSheet)="onBottomSheetHide($event)"
                   (drawerPositionChange)="onDrawerPositionChange($event)" (disableScrollContent)="bottomDrawer.disableScrollContent = $event" class="nearby-drawer">
    <div class="drawer-content nearby-expanded">
        <div [ngClass]="{'with-overflow-y': bottomDrawer.showBackToolbar && bottomDrawer.contentPosition > 0 && bottomDrawer.drawerState == 2 && !bottomDrawer.disableScrollContent}">
            <app-nearby [drawerState]="bottomDrawer.drawerState"></app-nearby>
        </div>
    </div>
</ion-bottom-drawer>

